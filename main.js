(()=>{"use strict";var t=function(){function t(t){var e=this,n=t.title,o=t.elements,l=t.buttons,a=t.template;this.buttons={},this.d="",this.title=n,this.elements=o,this.html=this.parseElements(o).reduce((function(t,e){return e.apply(t)}),a),Object.entries(l).forEach((function(t){var n=t[0],o=t[1];o.default&&(e.d=n);var l=o.callback?function(t){return o.callback(e.extract(t))}:void 0;e.buttons[n]={icon:'<i class="fas fa-'+o.icon+'"></i>',label:o.label,callback:l}})),this.dialog=new Dialog({title:this.title,content:this.html,buttons:this.buttons,default:this.d})}return t.prototype.render=function(){this.dialog.render(!0)},t.prototype.extract=function(t){var e={};return Object.entries(this.elements).map((function(t){return{key:t[0],val:t[1]}})).forEach((function(n){var o=n.key,l=n.val;return e[o]=l.extract(t)})),e},t.prototype.parseElements=function(t){return Object.values(t)},t}();!function(t){t.ElementContext=function(){};var e=function(){function t(t){this.key=t}return t.prototype.apply=function(t){return t.replaceAll("#{"+this.key+"}",this.injectHtml())},t.prototype.getElement=function(t){return t.find("#"+this.key)[0]},t}();t.Element=e}(t||(t={}));var e,n=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),o=function(t){function e(e,n){var o=t.call(this,e)||this;return o.label=n.label,o.checked=n.default,o}return n(e,t),e.prototype.injectHtml=function(){return"<div>\n    "+(this.label?'<label for="'+this.key+'">'+this.label+"</label>":"")+'\n    <input type="checkbox" id="'+this.key+'" name="'+this.key+" "+(this.checked?"checked":"")+'">\n      </div>'},e.prototype.extract=function(t){return this.getElement(t).checked},e}(t.Element),l={yay:{default:!0,label:"The default button"},echo:{default:!0,icon:"play",label:"Echo!",callback:function(t){console.log("TheBox: "+(t.theBox?"yes":"no"))}}},a={theBox:new o("theBox",{label:"This is a test checkbox"})},i=new t({title:"A test",elements:a,buttons:l,template:"Wooo look at me\n\n#{theBox}"}),r=function(t){var e=game.user.character,n=function(t){return{bpCost:t.bp?1:0,hpCost:0,cCost:Math.floor(0)}}(t);t.chat&&ChatMessage.create({user:game.user._id,content:e.name+" cast a blood magic spell at level 0 by spending "+n.hpCost+" health and "+n.bpCost+" blood points",type:CONST.CHAT_MESSAGE_TYPES.EMOTE})};!function(){var e={confirm:{icon:"skull",label:"Cast!",callback:r}},n={bp:new o("BloodPoints",{label:"Spend blood point to reduce cost?"}),chat:new o("SendToChat",{label:"Send to chat?",default:!0}),update:new o("Update",{label:"Send updates to character sheet?",default:!0})};new t({title:"Blood Magic Cost",elements:n,buttons:e,template:'<h1>Select spell level</h1>\n<div>\n    <label for="level">Spell level: </label>\n    <select id="level" name="level" required>${options}</select>\n</div>\n\n#{BloodPoints}\n\n<h2>costs:</h2>\n<div>\n    <label for="bloodCost">Blood Points: </label>\n    <output id="bloodCost"></output>\n</div>\n<div>\n    <label for="healthCost">HP: </label>\n    <output id="healthCost"></output>\n</div>\n<div>\n    <label for="corruptionCost">Corruption: </label>\n    <output id="corruptionCost"></output>\n</div>\n\n<h2>options:</h2>\n#{SendToChat}\n#{Update}'})}(),Hooks.on("ready",(function(){"W6ZmuiuY59tnrNxv"===game.userId?(i.render(),console.log("Hi Nova!")):console.log("You're not nova!")}))})();